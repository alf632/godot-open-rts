[gd_scene load_steps=20 format=3 uid="uid://tsh8b5qioguw"]

[ext_resource type="PackedScene" uid="uid://c2n4fxmgkv0vn" path="res://source/match/handlers/ProjectileSystemHandler.tscn" id="1_dkpid"]
[ext_resource type="Script" path="res://demo.gd" id="1_kv1a4"]
[ext_resource type="Script" path="res://DemoMatch.gd" id="2_ivema"]
[ext_resource type="Script" path="res://source/match/FpsCamera3D.gd" id="3_hsuq8"]
[ext_resource type="Script" path="res://source/match/Navigation.gd" id="3_m5q3o"]
[ext_resource type="PackedScene" uid="uid://ccwgdcyfg8job" path="res://source/match/units/traits/Pilotable.tscn" id="4_f06un"]
[ext_resource type="Script" path="res://source/match/AirNavigation.gd" id="4_w3feg"]
[ext_resource type="Script" path="res://DemoUnit.gd" id="5_4k75h"]
[ext_resource type="PackedScene" uid="uid://cq6ebbwygfl6" path="res://source/match/handlers/PlayModeSwitchHandler.tscn" id="5_72f01"]
[ext_resource type="Script" path="res://source/match/TerrainNavigation.gd" id="5_ocefc"]
[ext_resource type="PackedScene" uid="uid://b373fjcto1l4h" path="res://source/match/handlers/NavHandler.tscn" id="8_1k210"]
[ext_resource type="PackedScene" uid="uid://bj8c6tdt6o1yt" path="res://source/match/players/Player.tscn" id="8_go0lg"]
[ext_resource type="PackedScene" uid="uid://dmlef1nchuam4" path="res://source/match/maps/3Dmap/3Dmap.tscn" id="12_kfcua"]
[ext_resource type="PackedScene" uid="uid://bem5u20vcnnd7" path="res://source/match/units/traits/DirectMovement.tscn" id="13_qthh1"]
[ext_resource type="PackedScene" uid="uid://dg66oaqsqty53" path="res://source/DebugMarker3D.tscn" id="13_x4ese"]

[sub_resource type="Environment" id="Environment_g6rmh"]

[sub_resource type="NavigationMesh" id="NavigationMesh_pi1qa"]
geometry_source_geometry_mode = 2
geometry_source_group_name = &"air_navigation_input"
cell_size = 0.4
cell_height = 0.4
agent_height = 2.0
agent_radius = 0.8
agent_max_climb = 0.0

[sub_resource type="NavigationMesh" id="NavigationMesh_5tadr"]
geometry_parsed_geometry_type = 2
geometry_collision_mask = 4278190082
geometry_source_geometry_mode = 2
geometry_source_group_name = &"terrain_navigation_input"
cell_size = 0.3
cell_height = 0.3
agent_height = 1.8
agent_radius = 0.9
agent_max_climb = 0.0
edge_max_error = 1.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_ht2rm"]

[node name="Demo" type="Node3D"]
script = ExtResource("1_kv1a4")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_g6rmh")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.512043, 0.673161, -0.533541, 0, 0.621148, 0.783694, 0.85896, -0.401285, 0.318054, 0, 38.7614, 0)
shadow_enabled = true
shadow_blur = 0.05
directional_shadow_split_1 = 0.45
directional_shadow_split_2 = 0.5
directional_shadow_split_3 = 0.55
directional_shadow_blend_splits = true
directional_shadow_pancake_size = 100.0

[node name="Match" type="Node3D" parent="."]
script = ExtResource("2_ivema")

[node name="Navigation" type="Node3D" parent="Match"]
script = ExtResource("3_m5q3o")

[node name="Air" type="Node3D" parent="Match/Navigation"]
script = ExtResource("4_w3feg")

[node name="ReferenceMesh" type="MeshInstance3D" parent="Match/Navigation/Air" groups=["air_navigation_input"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
visible = false

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Match/Navigation/Air"]
navigation_mesh = SubResource("NavigationMesh_pi1qa")

[node name="Terrain" type="Node3D" parent="Match/Navigation"]
script = ExtResource("5_ocefc")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Match/Navigation/Terrain"]
navigation_mesh = SubResource("NavigationMesh_5tadr")

[node name="Handlers" type="Node3D" parent="Match"]

[node name="PlayModeSwitchHandler" parent="Match/Handlers" instance=ExtResource("5_72f01")]

[node name="ProjectileSystemHandler" parent="Match/Handlers" instance=ExtResource("1_dkpid")]

[node name="NavHandler" parent="Match/Handlers" instance=ExtResource("8_1k210")]

[node name="Units" type="Node3D" parent="Match"]

[node name="Player" parent="Match/Units" instance=ExtResource("8_go0lg")]

[node name="Unit" type="CharacterBody3D" parent="Match/Units/Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.3784, 65.2314, 61.9315)
motion_mode = 1
script = ExtResource("5_4k75h")

[node name="Pilotable" parent="Match/Units/Player/Unit" instance=ExtResource("4_f06un")]

[node name="Camera3D" type="Camera3D" parent="Match/Units/Player/Unit"]
current = true
script = ExtResource("3_hsuq8")

[node name="DirectMovement" parent="Match/Units/Player/Unit" instance=ExtResource("13_qthh1")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Match/Units/Player/Unit"]
shape = SubResource("CylinderShape3D_ht2rm")

[node name="DebugMarker3D" parent="Match/Units" instance=ExtResource("13_x4ese")]

[node name="Map" parent="Match" instance=ExtResource("12_kfcua")]
